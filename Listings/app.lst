


ARM Macro Assembler    Page 1 


    1 00000000         ; Definitions  -- references to 'UM' are to the User Man
                       ual.
    2 00000000         
    3 00000000         ; Timer Stuff -- UM, Table 173
    4 00000000         
    5 00000000 E0004000 
                       T0      equ              0xE0004000  ; Timer 0 Base Addr
                                                            ess
    6 00000000 E0008000 
                       T1      equ              0xE0008000
    7 00000000         
    8 00000000 00000000 
                       IR      equ              0           ; Add this to a tim
                                                            er's base address t
                                                            o get actual regist
                                                            er address
    9 00000000 00000004 
                       TCR     equ              4
   10 00000000 00000014 
                       MCR     equ              0x14
   11 00000000 00000018 
                       MR0     equ              0x18
   12 00000000         
   13 00000000 00000400 
                       STACKSIZE
                               equ              1024
   14 00000000         
   15 00000000 00000002 
                       TimerCommandReset
                               equ              2
   16 00000000 00000001 
                       TimerCommandRun
                               equ              1
   17 00000000 00000003 
                       TimerModeResetAndInterrupt
                               equ              3
   18 00000000 00000001 
                       TimerResetTimer0Interrupt
                               equ              1
   19 00000000 000000FF 
                       TimerResetAllInterrupts
                               equ              0xFF
   20 00000000         
   21 00000000         ; VIC Stuff -- UM, Table 41
   22 00000000 FFFFF000 
                       VIC     equ              0xFFFFF000  ; VIC Base Address
   23 00000000 00000010 
                       IntEnable
                               equ              0x10
   24 00000000 00000030 
                       VectAddr
                               equ              0x30
   25 00000000 00000100 
                       VectAddr0
                               equ              0x100
   26 00000000 00000200 
                       VectCtrl0
                               equ              0x200
   27 00000000         



ARM Macro Assembler    Page 2 


   28 00000000 00000004 
                       Timer0ChannelNumber
                               equ              4           ; UM, Table 63
   29 00000000 00000010 
                       Timer0Mask
                               equ              1<<Timer0ChannelNumber 
                                                            ; UM, Table 63
   30 00000000 00000005 
                       IRQslot_en
                               equ              5           ; UM, Table 58
   31 00000000         
   32 00000000 E0028018 
                       IO1DIR  EQU              0xE0028018
   33 00000000 E0028014 
                       IO1SET  EQU              0xE0028014
   34 00000000 E002801C 
                       IO1CLR  EQU              0xE002801C
   35 00000000 E0028010 
                       IO1PIN  EQU              0xE0028010
   36 00000000         
   37 00000000                 AREA             InitialisationAndMain, CODE, RE
ADONLY
   38 00000000                 IMPORT           main
   39 00000000         
   40 00000000         ; (c) Mike Brady, 2014–2016.
   41 00000000         
   42 00000000                 EXPORT           start
   43 00000000         start
   44 00000000         ; initialisation code
   45 00000000         
   46 00000000         ; Initialise the VIC
   47 00000000 E59F00DC        ldr              r0,=VIC     ; looking at you, V
                                                            IC!
   48 00000004         
   49 00000004 E59F10DC        ldr              r1,=irqhan
   50 00000008 E5801100        str              r1,[r0,#VectAddr0] ; associate 
                                                            our interrupt handl
                                                            er with Vectored In
                                                            terrupt 0
   51 0000000C         
   52 0000000C E3A01024        mov              r1,#Timer0ChannelNumber+(1<<IRQ
slot_en)
   53 00000010 E5801200        str              r1,[r0,#VectCtrl0] ; make Timer
                                                             0 interrupts the s
                                                            ource of Vectored I
                                                            nterrupt 0
   54 00000014         
   55 00000014 E3A01010        mov              r1,#Timer0Mask
   56 00000018 E5801010        str              r1,[r0,#IntEnable] ; enable Tim
                                                            er 0 interrupts to 
                                                            be recognised by th
                                                            e VIC
   57 0000001C         
   58 0000001C E3A01000        mov              r1,#0
   59 00000020 E5801030        str              r1,[r0,#VectAddr] ; remove any 
                                                            pending interrupt (
                                                            may not be needed)
   60 00000024         
   61 00000024         ; Initialise Timer 0



ARM Macro Assembler    Page 3 


   62 00000024 E59F00C0        ldr              r0,=T0      ; looking at you, T
                                                            imer 0!
   63 00000028         
   64 00000028 E3A01002        mov              r1,#TimerCommandReset
   65 0000002C E5801004        str              r1,[r0,#TCR]
   66 00000030         
   67 00000030 E3A010FF        mov              r1,#TimerResetAllInterrupts
   68 00000034 E5801000        str              r1,[r0,#IR]
   69 00000038         
   70 00000038 E59F10B0        ldr              r1,=(14745600/10)-1 ; 5 ms = 1/
                                                            200 second
   71 0000003C E5801018        str              r1,[r0,#MR0]
   72 00000040         
   73 00000040 E3A01003        mov              r1,#TimerModeResetAndInterrupt
   74 00000044 E5801014        str              r1,[r0,#MCR]
   75 00000048         
   76 00000048 E3A01001        mov              r1,#TimerCommandRun
   77 0000004C E5801004        str              r1,[r0,#TCR]
   78 00000050         
   79 00000050 E59F109C        ldr              r1,=IO1DIR
   80 00000054 E3A0280F        ldr              r2,=0x000f0000 ;select P1.19--P
                                                            1.16
   81 00000058 E5812000        str              r2,[r1]     ;make them outputs
   82 0000005C E59F1094        ldr              r1,=IO1SET
   83 00000060 E5812000        str              r2,[r1]     ;set them to turn t
                                                            he LEDs off
   84 00000064 E59F2090        ldr              r2,=IO1CLR
   85 00000068         
   86 00000068 E59F5090        ldr              r5, =leftLight
   87 0000006C E59F4090        ldr              r4, =stack0
   88 00000070 E5845038        str              r5, [r4, #56]
   89 00000074 E584503C        str              r5, [r4, #60]
   90 00000078         
   91 00000078 E59F5088        ldr              r5, =rightLight
   92 0000007C E59F4088        ldr              r4, =stack1
   93 00000080 E5845038        str              r5, [r4, #56]
   94 00000084 E584503C        str              r5, [r4, #60]
   95 00000088         
   96 00000088         
   97 00000088         leftLight
   98 00000088 E59F1064        ldr              r1,=IO1DIR
   99 0000008C E3A0280F        ldr              r2,=0x000f0000 ;select P1.19--P
                                                            1.16
  100 00000090 E5812000        str              r2,[r1]     ;make them outputs
  101 00000094 E59F105C        ldr              r1,=IO1SET
  102 00000098 E5812000        str              r2,[r1]     ;set them to turn t
                                                            he LEDs off
  103 0000009C E59F2058        ldr              r2,=IO1CLR
  104 000000A0 E3A03703        ldr              r3, =0x000C0000
  105 000000A4 E5813000        str              r3,[r1]     ;set the bit -> tur
                                                            n off the right LED
                                                            
  106 000000A8 E3A03803        ldr              r3,=0x00030000 
                                                            ; start with P1.16.
                                                            
  107 000000AC E5823000        str              r3,[r2]     ; clear the bit -> 
                                                            turn on the LED
  108 000000B0 EAFFFFF4        b                leftLight
  109 000000B4         



ARM Macro Assembler    Page 4 


  110 000000B4         rightLight
  111 000000B4 E59F1038        ldr              r1,=IO1DIR
  112 000000B8 E3A0280F        ldr              r2,=0x000f0000 ;select P1.19--P
                                                            1.16
  113 000000BC E5812000        str              r2,[r1]     ;make them outputs
  114 000000C0 E59F1030        ldr              r1,=IO1SET
  115 000000C4 E5812000        str              r2,[r1]     ;set them to turn t
                                                            he LEDs off
  116 000000C8 E59F202C        ldr              r2,=IO1CLR
  117 000000CC E3A03803        ldr              r3, =0x00030000
  118 000000D0 E5813000        str              r3,[r1]     ;set the bit -> tur
                                                            n off the right LED
                                                            
  119 000000D4 E3A03703        ldr              r3,=0x000C0000 
                                                            ; start with P1.16.
                                                            
  120 000000D8 E5823000        str              r3,[r2]     ; clear the bit -> 
                                                            turn on the LED
  121 000000DC EAFFFFF4        b                rightLight
  122 000000E0         
  123 000000E0         
  124 000000E0         
  125 000000E0         ;from here, initialisation is finished, so it should be 
                       the main body of the main program
  126 000000E0 EAFFFFFE 
                       wloop   b                wloop       ; branch always
  127 000000E4         ;main program execution will never drop below the statem
                       ent above.
  128 000000E4         
  129 000000E4 FFFFF000 
              00000000 
              E0004000 
              00167FFF 
              E0028018 
              E0028014 
              E002801C 
              00000000 
              00000000 
              00000000 
              00000000         AREA             InterruptStuff, CODE, READONLY
  130 00000000 E24EE004 
                       irqhan  sub              lr,lr,#4
  131 00000004 E92DDFFF        stmfd            sp!,{r0-r12, lr, pc} ; the lr w
                                                            ill be restored to 
                                                            the pc
  132 00000008         
  133 00000008         ;ldr r1, pc
  134 00000008         ;sub r1, r1, #8
  135 00000008         ;stmfd sp! {r1}
  136 00000008         ;this is the body of the interrupt handler
  137 00000008         
  138 00000008         ;here you'd put the unique part of your interrupt handle
                       r
  139 00000008         ;all the other stuff is "housekeeping" to save registers
                        and acknowledge interrupts
  140 00000008         
  141 00000008 E59F00A8        ldr              r0, =lastThread
  142 0000000C E5901000        ldr              r1, [r0]
  143 00000010 E3510000        cmp              r1, #0



ARM Macro Assembler    Page 5 


  144 00000014 1A000001        bne              stackThread1
  145 00000018         stackThread0
  146 00000018 E59F009C        ldr              r0, =stack0
  147 0000001C EA000000        b                manage
  148 00000020         stackThread1
  149 00000020 E59F0098        ldr              r0, =stack1
  150 00000024         manage
  151 00000024 E3A06000        mov              r6, #0
  152 00000028         stackLoop
  153 00000028 E356000F        cmp              r6, #15
  154 0000002C 0A000004        beq              endLoop
  155 00000030 E8BD0002        ldmfd            sp!, {r1}
  156 00000034 E5801000        str              r1, [r0]
  157 00000038 E2800004        add              r0, r0, #4
  158 0000003C E2866001        add              r6, r6, #1
  159 00000040 EAFFFFF8        b                stackLoop
  160 00000044         endLoop
  161 00000044         
  162 00000044 E59F006C        ldr              r0, =lastThread
  163 00000048 E5901000        ldr              r1, [r0]
  164 0000004C E3510000        cmp              r1, #0
  165 00000050 0A000001        beq              reloadThread1
  166 00000054         reloadThread0
  167 00000054 E59F0060        ldr              r0, =stack0
  168 00000058 EA000000        b                reload
  169 0000005C         reloadThread1
  170 0000005C E59F005C        ldr              r0, =stack1
  171 00000060         reload
  172 00000060         
  173 00000060 E3A0603C        mov              r6, #60
  174 00000064         unstackLoop
  175 00000064 E3560000        cmp              r6, #0
  176 00000068 DA000003        ble              endUnstack
  177 0000006C E7901006        ldr              r1, [r0, r6]
  178 00000070 E2466004        sub              r6, r6, #4
  179 00000074 E92D0002        stmfd            sp!, {r1}
  180 00000078 EAFFFFF9        b                unstackLoop
  181 0000007C         endUnstack
  182 0000007C         
  183 0000007C E59F0034        ldr              r0, =lastThread
  184 00000080 E5901000        ldr              r1, [r0]
  185 00000084 E3510000        cmp              r1, #0
  186 00000088 0A000001        beq              toOne
  187 0000008C E3A02000        ldr              r2, =0
  188 00000090 EA000000        b                skip
  189 00000094         toOne
  190 00000094 E3A02001        ldr              r2, =1
  191 00000098         skip
  192 00000098 E5802000        str              r2, [r0]
  193 0000009C         
  194 0000009C         ;this is where we stop the timer from making the interru
                       pt request to the VIC
  195 0000009C         ;i.e. we 'acknowledge' the interrupt
  196 0000009C E59F0030        ldr              r0,=T0
  197 000000A0 E3A01001        mov              r1,#TimerResetTimer0Interrupt
  198 000000A4 E5801000        str              r1,[r0,#IR] ; remove MR0 interr
                                                            upt request from ti
                                                            mer
  199 000000A8         



ARM Macro Assembler    Page 6 


  200 000000A8         ;here we stop the VIC from making the interrupt request 
                       to the CPU:
  201 000000A8 E59F0028        ldr              r0,=VIC
  202 000000AC E3A01000        mov              r1,#0
  203 000000B0 E5801030        str              r1,[r0,#VectAddr] ; reset VIC
  204 000000B4         
  205 000000B4 E8FDDFFF        ldmfd            sp!,{r0-r12,lr, pc}^ ; return f
                                                            rom interrupt, rest
                                                            oring pc from lr
  206 000000B8         ; and also restoring the CPSR
  207 000000B8         
  208 000000B8 00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              E0004000 
              FFFFF000         AREA             Subroutines, CODE, READONLY
  209 00000000         
  210 00000000                 AREA             Stuff, DATA, READWRITE
  211 00000000 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 7 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 8 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 9 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 10 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 11 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 12 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00       stack0  SPACE            STACKSIZE
  212 00000400 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 13 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 14 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 15 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 16 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 



ARM Macro Assembler    Page 17 


              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00       stack1  SPACE            STACKSIZE
  213 00000800 00      lastThread
                               DCB              0x00



ARM Macro Assembler    Page 18 


  214 00000801         
  215 00000801         
  216 00000801                 END
Command Line: --debug --xref --apcs=interwork --depend=.\app.d -o.\app.o -IC:\K
eil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\Inc\Philips --predef
ine="__EVAL SETA 1" --predefine="__MICROLIB SETA 1" --list=.\listings\app.lst A
pp.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

InitialisationAndMain 00000000

Symbol: InitialisationAndMain
   Definitions
      At line 37 in file App.s
   Uses
      None
Comment: InitialisationAndMain unused
leftLight 00000088

Symbol: leftLight
   Definitions
      At line 97 in file App.s
   Uses
      At line 86 in file App.s
      At line 108 in file App.s

rightLight 000000B4

Symbol: rightLight
   Definitions
      At line 110 in file App.s
   Uses
      At line 91 in file App.s
      At line 121 in file App.s

start 00000000

Symbol: start
   Definitions
      At line 43 in file App.s
   Uses
      At line 42 in file App.s
Comment: start used once
wloop 000000E0

Symbol: wloop
   Definitions
      At line 126 in file App.s
   Uses
      At line 126 in file App.s
Comment: wloop used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

InterruptStuff 00000000

Symbol: InterruptStuff
   Definitions
      At line 129 in file App.s
   Uses
      None
Comment: InterruptStuff unused
endLoop 00000044

Symbol: endLoop
   Definitions
      At line 160 in file App.s
   Uses
      At line 154 in file App.s
Comment: endLoop used once
endUnstack 0000007C

Symbol: endUnstack
   Definitions
      At line 181 in file App.s
   Uses
      At line 176 in file App.s
Comment: endUnstack used once
irqhan 00000000

Symbol: irqhan
   Definitions
      At line 130 in file App.s
   Uses
      At line 49 in file App.s
Comment: irqhan used once
manage 00000024

Symbol: manage
   Definitions
      At line 150 in file App.s
   Uses
      At line 147 in file App.s
Comment: manage used once
reload 00000060

Symbol: reload
   Definitions
      At line 171 in file App.s
   Uses
      At line 168 in file App.s
Comment: reload used once
reloadThread0 00000054

Symbol: reloadThread0
   Definitions
      At line 166 in file App.s
   Uses
      None
Comment: reloadThread0 unused
reloadThread1 0000005C

Symbol: reloadThread1



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 169 in file App.s
   Uses
      At line 165 in file App.s
Comment: reloadThread1 used once
skip 00000098

Symbol: skip
   Definitions
      At line 191 in file App.s
   Uses
      At line 188 in file App.s
Comment: skip used once
stackLoop 00000028

Symbol: stackLoop
   Definitions
      At line 152 in file App.s
   Uses
      At line 159 in file App.s
Comment: stackLoop used once
stackThread0 00000018

Symbol: stackThread0
   Definitions
      At line 145 in file App.s
   Uses
      None
Comment: stackThread0 unused
stackThread1 00000020

Symbol: stackThread1
   Definitions
      At line 148 in file App.s
   Uses
      At line 144 in file App.s
Comment: stackThread1 used once
toOne 00000094

Symbol: toOne
   Definitions
      At line 189 in file App.s
   Uses
      At line 186 in file App.s
Comment: toOne used once
unstackLoop 00000064

Symbol: unstackLoop
   Definitions
      At line 174 in file App.s
   Uses
      At line 180 in file App.s
Comment: unstackLoop used once
14 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Subroutines 00000000

Symbol: Subroutines
   Definitions
      At line 208 in file App.s
   Uses
      None
Comment: Subroutines unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Stuff 00000000

Symbol: Stuff
   Definitions
      At line 210 in file App.s
   Uses
      None
Comment: Stuff unused
lastThread 00000800

Symbol: lastThread
   Definitions
      At line 213 in file App.s
   Uses
      At line 141 in file App.s
      At line 162 in file App.s
      At line 183 in file App.s

stack0 00000000

Symbol: stack0
   Definitions
      At line 211 in file App.s
   Uses
      At line 87 in file App.s
      At line 146 in file App.s
      At line 167 in file App.s

stack1 00000400

Symbol: stack1
   Definitions
      At line 212 in file App.s
   Uses
      At line 92 in file App.s
      At line 149 in file App.s
      At line 170 in file App.s

4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

IO1CLR E002801C

Symbol: IO1CLR
   Definitions
      At line 34 in file App.s
   Uses
      At line 84 in file App.s
      At line 103 in file App.s
      At line 116 in file App.s

IO1DIR E0028018

Symbol: IO1DIR
   Definitions
      At line 32 in file App.s
   Uses
      At line 79 in file App.s
      At line 98 in file App.s
      At line 111 in file App.s

IO1PIN E0028010

Symbol: IO1PIN
   Definitions
      At line 35 in file App.s
   Uses
      None
Comment: IO1PIN unused
IO1SET E0028014

Symbol: IO1SET
   Definitions
      At line 33 in file App.s
   Uses
      At line 82 in file App.s
      At line 101 in file App.s
      At line 114 in file App.s

IR 00000000

Symbol: IR
   Definitions
      At line 8 in file App.s
   Uses
      At line 68 in file App.s
      At line 198 in file App.s

IRQslot_en 00000005

Symbol: IRQslot_en
   Definitions
      At line 30 in file App.s
   Uses
      At line 52 in file App.s
Comment: IRQslot_en used once
IntEnable 00000010

Symbol: IntEnable
   Definitions



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

      At line 23 in file App.s
   Uses
      At line 56 in file App.s
Comment: IntEnable used once
MCR 00000014

Symbol: MCR
   Definitions
      At line 10 in file App.s
   Uses
      At line 74 in file App.s
Comment: MCR used once
MR0 00000018

Symbol: MR0
   Definitions
      At line 11 in file App.s
   Uses
      At line 71 in file App.s
Comment: MR0 used once
STACKSIZE 00000400

Symbol: STACKSIZE
   Definitions
      At line 13 in file App.s
   Uses
      At line 211 in file App.s
      At line 212 in file App.s

T0 E0004000

Symbol: T0
   Definitions
      At line 5 in file App.s
   Uses
      At line 62 in file App.s
      At line 196 in file App.s

T1 E0008000

Symbol: T1
   Definitions
      At line 6 in file App.s
   Uses
      None
Comment: T1 unused
TCR 00000004

Symbol: TCR
   Definitions
      At line 9 in file App.s
   Uses
      At line 65 in file App.s
      At line 77 in file App.s

Timer0ChannelNumber 00000004

Symbol: Timer0ChannelNumber
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      At line 28 in file App.s
   Uses
      At line 29 in file App.s
      At line 52 in file App.s

Timer0Mask 00000010

Symbol: Timer0Mask
   Definitions
      At line 29 in file App.s
   Uses
      At line 55 in file App.s
Comment: Timer0Mask used once
TimerCommandReset 00000002

Symbol: TimerCommandReset
   Definitions
      At line 15 in file App.s
   Uses
      At line 64 in file App.s
Comment: TimerCommandReset used once
TimerCommandRun 00000001

Symbol: TimerCommandRun
   Definitions
      At line 16 in file App.s
   Uses
      At line 76 in file App.s
Comment: TimerCommandRun used once
TimerModeResetAndInterrupt 00000003

Symbol: TimerModeResetAndInterrupt
   Definitions
      At line 17 in file App.s
   Uses
      At line 73 in file App.s
Comment: TimerModeResetAndInterrupt used once
TimerResetAllInterrupts 000000FF

Symbol: TimerResetAllInterrupts
   Definitions
      At line 19 in file App.s
   Uses
      At line 67 in file App.s
Comment: TimerResetAllInterrupts used once
TimerResetTimer0Interrupt 00000001

Symbol: TimerResetTimer0Interrupt
   Definitions
      At line 18 in file App.s
   Uses
      At line 197 in file App.s
Comment: TimerResetTimer0Interrupt used once
VIC FFFFF000

Symbol: VIC
   Definitions
      At line 22 in file App.s
   Uses



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

      At line 47 in file App.s
      At line 201 in file App.s

VectAddr 00000030

Symbol: VectAddr
   Definitions
      At line 24 in file App.s
   Uses
      At line 59 in file App.s
      At line 203 in file App.s

VectAddr0 00000100

Symbol: VectAddr0
   Definitions
      At line 25 in file App.s
   Uses
      At line 50 in file App.s
Comment: VectAddr0 used once
VectCtrl0 00000200

Symbol: VectCtrl0
   Definitions
      At line 26 in file App.s
   Uses
      At line 53 in file App.s
Comment: VectCtrl0 used once
24 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

main 00000000

Symbol: main
   Definitions
      At line 38 in file App.s
   Uses
      None
Comment: main unused
1 symbol
385 symbols in table
